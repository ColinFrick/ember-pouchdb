!function(){var a,b;!function(){var c={},d={};a=function(a,b,d){c[a]={deps:b,callback:d}},b=function(a){if(d[a])return d[a];d[a]={};var e=c[a];if(!e)throw new Error("Module '"+a+"' not found.");for(var f,g=e.deps,h=e.callback,i=[],j=0,k=g.length;k>j;j++)"exports"===g[j]?i.push(f={}):i.push(b(g[j]));var l=h.apply(this,i);return d[a]=f||l}}(),a("ember-pouchdb/initializer",["ember-pouchdb/storage","exports"],function(a,b){"use strict";var c=a.Storage,d=function(a,b){return a=Ember.merge({name:"PouchDB",propName:"pouch",dbName:"PouchDB",fullName:"pouch:main",types:["controller","route"],docTypes:{}},a),"undefined"==typeof b&&(b=function(b,d){d.register(a.fullName,c.extend({dbName:a.dbName,docTypes:a.docTypes})),a.types.forEach(function(b){d.inject(b,a.propName,a.fullName)})}),a.initialize=b,a};b.initializer=d}),a("ember-pouchdb/model",["exports"],function(a){"use strict";var b=Ember.Object.extend(Ember.Copyable,{copy:function(){var a=this.serialize();return a.id=this.get("id"),a.rev=this.get("rev"),this.constructor.create(a)},serialize:function(){throw new Error(Ember.String.fmt("%@ must implement serialize() method which returns JSON of this model.",[this]))}});a.Model=b}),a("ember-pouchdb/storage",["ember-pouchdb/model","exports"],function(a,b){"use strict";var c=a.Model,d=Ember.Object.extend({dbName:null,docTypes:{},db:null,init:function(){var a=this;Ember.run(function(){a.set("db",a.create())})},create:function(a,b){"undefined"==typeof a&&(a=this.get("dbName")),"undefined"==typeof b&&(b={});var c=function(c,d){new Pouch(a,b,function(a,b){Ember.run(function(){a?d(a):c(b)})})};return new Ember.RSVP.Promise(c)},findAll:function(a,b){var c=this.get("docTypes."+a);Ember.assert("You have to register %@ docType before you can query by it. Look at docTypes property in PouchStorage class.".fmt(a),c),"undefined"==typeof b&&(b={reduce:!1}),b.docType=a;var d=function(a){a.docType===b.docType&&emit(a._id,a)},e=function(a){return new Ember.RSVP.Promise(function(c,e){a.query({map:d},b,function(a,b){Ember.run(function(){a?e(a):c(b)})})})},f=function(a){return Em.A(a.rows).map(function(a){var b=c.create(a.value);return b.setProperties({id:a.value._id,rev:a.value._rev}),b})};return this.get("db").then(e).then(f)},GET:function(a,b){"undefined"==typeof b&&(b={});var d=this,e=function(c){return new Ember.RSVP.Promise(function(d,e){c.get(a,b,function(a,b){Ember.run(function(){a?e(a):d(b)})})})},f=function(a){var b;if(a.hasOwnProperty("docType")&&d.get("docTypes."+a.docType)){var e=d.get("docTypes."+a.docType);b=e.create(a)}else b=c.create(a);return b};return this.get("db").then(e).then(f)},POST:function(a,b){var c=a.serialize(),d=this.getDocType(a.constructor);Em.assert("Model doesn't have a corresponding doc type.",d),c.docType=d;var e=function(a){return new Ember.RSVP.Promise(function(d,e){a.post(c,b,function(a,b){Ember.run(function(){a?e(a):d(b)})})})},f=function(b){return a.set("id",b.id),a.set("rev",b.rev),a.set("docType",d),a};return this.get("db").then(e).then(f)},PUT:function(a,b){var c=a.serialize();"undefined"==typeof b&&(b={}),a.get("docType")||a.set("docType",this.getDocType(a.constructor)),c.docType=a.get("docType")||this.getDocType(a.constructor),c._id=a.get("id"),c._rev=a.get("rev");var d=function(a){return new Ember.RSVP.Promise(function(d,e){a.put(c,b,function(a,b){Ember.run(function(){a?e(a):d(b)})})})},e=function(b){return a.setProperties({id:b.id,rev:b.rev}),a};return this.get("db").then(d).then(e)},DELETE:function(a,b){var c;"undefined"==typeof b&&(b={}),c={_id:a.get("id"),_rev:a.get("rev")};var d=function(a){return new Ember.RSVP.Promise(function(d,e){a.remove(c,b,function(a){Ember.run(function(){a?e(a):d()})})})};return this.get("db").then(d)},remove:function(a){var b=this,c=(this.get("db"),b.get("dbName"));"undefined"==typeof a&&(a={});var d=function(b,d){Pouch.destroy(c,a,function(a){Ember.run(function(){a?d(a):b()})})};return new Ember.RSVP.Promise(d)},getDocType:function(a){var b=!1,c=this.get("docTypes");return Object.keys(c).find(function(d){return Em.isEqual(c[d],a)&&(b=d),b}),b}});b.Storage=d}),a("ember-pouchdb",["ember-pouchdb/initializer","ember-pouchdb/model","ember-pouchdb/storage","exports"],function(a,b,c,d){"use strict";var e=a.initializer,f=b.Model,g=c.Storage;d.initializer=e,d.Model=f,d.Storage=g}),window.EPDB=b("ember-pouchdb")}(window);